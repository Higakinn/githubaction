name: CI CD sample # ワークフロー名

on: [push] #GitHub Actionのトリガーを設定

jobs:
  lint: #ジョブ名
    runs-on: ubuntu-latest #実行環境(Ubuntuの最新版環境で実行)
    name: run docker in github action cd sample
    steps: #実行処理やコマンドを記述
      - name: git checkout my branch
        uses: actions/checkout@v2
        with:
          ref: ${{ github.ref }}
      - name: docker run command
        run: docker run -t --rm python:3.7-alpine sh -c "echo deploy"
      - run: echo ${{ github.ref }}
  test:
    runs-on: ubuntu-latest
    needs: [lint]
    steps:
      - name: ls command
        run: ls -al
  deploy:
    # if: contains( github.ref, 'master')
    runs-on: ubuntu-latest
    needs: [lint, test]
    steps:
      - name: ls command
        run: echo end
